# 客服聊天记录数据清洗工具

这是一个用于处理和分析客服聊天记录的Python工具，可以将原始的聊天记录Excel文件转换为结构化的问答对数据，并生成详细的数据质量报告。

## 功能特点

- 数据清洗和标准化
  - 统一编码格式
  - 标准化日期时间
  - 清理无效消息
  - 敏感信息脱敏
  - 错别字修正

- 数据分析和诊断
  - 基础统计信息
  - 消息质量分析
  - 会话模式分析
  - 响应时间分析
  - 数据完整性检查

- 问答对提取
  - 自动识别客户问题和客服回答
  - 智能会话分割
  - 问题标签提取
  - 知识库格式转换

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

1. 准备数据
   - 确保Excel文件包含以下列：
     - 消息来源
     - 聊天内容
     - 消息时间

2. 运行程序
   ```python
   from chat_qa_processor import ChatQAProcessor
   
   processor = ChatQAProcessor()
   results = processor.process_chat_records('your_excel_file.xlsx')
   ```

3. 查看结果
   - 程序会在output目录下生成以下文件：
     - qa_pairs.xlsx：清洗后的问答对数据
     - diagnostic_report.json：数据质量诊断报告
     - knowledge_base.json：知识库格式的问答对

## 输出说明

### 1. 问答对数据 (qa_pairs.xlsx)
- 客户ID：客户唯一标识
- 客服：客服人员信息
- 问题：客户问题
- 回答：客服回答
- 时间：对话时间
- 标签：问题分类标签

### 2. 诊断报告 (diagnostic_report.json)
- 基础统计信息
  - 总记录数
  - 缺失率
  - 重复率
  - 表情符号使用频率
  - 语言混合情况
  - 消息长度统计

- 响应时间分析
  - 平均响应时间
  - 最大响应时间
  - 最小响应时间
  - 响应时间标准差

- 会话模式分析
  - 总会话数
  - 平均会话长度
  - 最大会话长度
  - 最小会话长度

- 质量指标
  - 数据完整性
  - 数据一致性
  - 数据有效性

### 3. 知识库数据 (knowledge_base.json)
- question：问题
- answer：回答
- tags：问题标签
- source：数据来源
- effective_date：有效期

## 注意事项

1. 数据安全
   - 程序会自动对敏感信息（如手机号、身份证号）进行脱敏处理
   - 建议在使用前备份原始数据

2. 性能考虑
   - 对于大量数据，处理可能需要较长时间
   - 建议先使用小数据集测试

3. 数据质量
   - 程序会自动过滤无效消息和测试数据
   - 对于异常数据会在诊断报告中标注

## 更新日志

### v1.0.0 (2024-03-27)
- 初始版本发布
- 实现基础的数据清洗和分析功能
- 支持问答对提取和知识库转换 